import os, shutil, glob
import random
import numpy as np

def moveAllFilesInDir(srcDir, dstDir):
    for filePath in glob.glob(srcDir + '\*'):
        shutil.move(filePath, dstDir)
apps = os.listdir('data')
random.shuffle(apps)
malware_apps = []
bengin_apps = []
for app in apps:
    y_train = np.load(os.path.join('data', app,'y_train.npy'))
    if(y_train[0][0] == 1): # malware
        malware_apps.append(app)
    else:
        bengin_apps.append(app)
        
random.shuffle(malware_apps)
random.shuffle(bengin_apps)

print(len(malware_apps))
print(len(bengin_apps))
for app in malware_apps[:1000]:
    os.mkdir(os.path.join('test_data', app))
    moveAllFilesInDir(os.path.join('data',app), os.path.join('test_data',app))
    os.rmdir(os.path.join('data',app))
for app in bengin_apps[:1000]:
    os.mkdir(os.path.join('test_data', app))
    moveAllFilesInDir(os.path.join('data',app), os.path.join('test_data',app))
    os.rmdir(os.path.join('data',app))
        